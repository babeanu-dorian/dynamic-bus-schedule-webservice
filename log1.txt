
> dynamicbus@0.0.0 test /home/alex/Documents/NC/dynamic-bus-schedule-webservice
> mocha --timeout 10000



  GET index
[0mGET / [32m200 [0m15.411 ms - 7847[0m
index = [object Object]
    âœ“ it should GET the index (52ms)

  App Data
    GET general data about routes and stations
[0mGET /appData [32m200 [0m2.001 ms - -[0m
appdata = [object Object]
      1) it should get all general data about all routes and stations on the routes

  Bus Data
    POST bus data
{ id: '0', key: '0000000000000000', route: '0', progress: '0.0' }
[0mPOST /busData [33m400 [0m12.331 ms - -[0m
      2) Should send bus data to server and receive the ID of the route the bus is on and the ID of the server handling its data
    POST bus data with bad fields
{ badId: '0' }
[0mPOST /busData [33m400 [0m1.997 ms - -[0m
      âœ“ Should send bus data with bad fields to server and receive Bad Request Message
    POST bus data with invalid ID value
{ id: 'a', key: '0000000000000000', route: '0', progress: '0.0' }
[0mPOST /busData [33m400 [0m0.450 ms - -[0m
      âœ“ Should send bus data with invalid ID and receive Bad Request
    POST bus data with invalid key value
{ id: '0', key: '1', route: '0', progress: '0.0' }
[0mPOST /busData [33m400 [0m1.313 ms - -[0m
      âœ“ Should send bus data with invalid key and receive Bad Request
    POST bus data with invalid route value
{ id: '0',
  key: '0000000000000000',
  route: 'bad',
  progress: '0.0' }
[0mPOST /busData [33m400 [0m0.460 ms - -[0m
      âœ“ Should send bus data with invalid route and receive Bad Request
    POST bus data with invalid progress value
{ id: '0',
  key: '0000000000000000',
  route: 'bad',
  progress: '666.666' }
[0mPOST /busData [33m400 [0m0.388 ms - -[0m
      âœ“ Should send bus data with invalid progress value and receive Bad Request
    POST bus data with ID not in database
{ id: '1', key: '0000000000000000', route: '0', progress: '0.0' }
[0mPOST /busData [33m400 [0m0.349 ms - -[0m
      âœ“ Should send bus data with invalid route and receive Bad Request
    POST bus data with key not matching ID
{ id: '0', key: '0000000000000001', route: '0', progress: '0.0' }
[0mPOST /busData [33m400 [0m1.382 ms - -[0m
      âœ“ Should send bus data with invalid route and receive Bad Request
    POST bus data with key not matching ID not in database
{ id: '0', key: '0000000000000001', route: '1', progress: '0.0' }
[0mPOST /busData [33m400 [0m0.677 ms - -[0m
      âœ“ Should send bus data with route that doesnt exist and receive Bad Request
    POST bus data with SQL injection
{ id: '0', key: 'a || 1 = 1; --hi', route: '1', progress: '0.0' }
[0mPOST /busData [33m400 [0m0.517 ms - -[0m
      âœ“ Should send bus data with SQL injection and receive Bad Request

  Route Data
    POST a route ID
{ route: '0', station: '0' }
[0mPOST /busData [33m400 [0m0.688 ms - -[0m
      3) Should post a route ID and station IDand receive the server handling the route and the schedule of that stop from the current time
    POST a bad route ID
{ route: '-1', station: '0' }
[0mPOST /busData [33m400 [0m0.543 ms - -[0m
      âœ“ Should post a bad route ID and receive a 400
    POST a bad station ID
{ route: '0', station: '-1' }
[0mPOST /busData [33m400 [0m0.424 ms - -[0m
      âœ“ Should post a bad station ID and receive a 400


  12 passing (174ms)
  3 failing

  1) App Data
       GET general data about routes and stations
         it should get all general data about all routes and stations on the routes:
     Uncaught AssertionError: expected '' to be an object
      at chai.request.get.end (test/appDataTests.js:32:25)
      at Test.Request.callback (node_modules/superagent/lib/node/index.js:785:12)
      at IncomingMessage.<anonymous> (node_modules/superagent/lib/node/index.js:990:12)
      at endReadableNT (_stream_readable.js:975:12)
      at _combinedTickCallback (internal/process/next_tick.js:80:11)
      at process._tickCallback (internal/process/next_tick.js:104:9)

  2) Bus Data
       POST bus data
         Should send bus data to server and receive the ID of the route the bus is on and the ID of the server handling its data:
     Uncaught AssertionError: expected { Object (domain, _events, ...) } to have status code 200 but got 400
      at chai.request.post.send.end (test/busDataTests.js:25:21)
      at Test.Request.callback (node_modules/superagent/lib/node/index.js:797:3)
      at IncomingMessage.<anonymous> (node_modules/superagent/lib/node/index.js:990:12)
      at endReadableNT (_stream_readable.js:975:12)
      at _combinedTickCallback (internal/process/next_tick.js:80:11)
      at process._tickCallback (internal/process/next_tick.js:104:9)

  3) Route Data
       POST a route ID
         Should post a route ID and station IDand receive the server handling the route and the schedule of that stop from the current time:
     Uncaught AssertionError: expected { Object (domain, _events, ...) } to have status code 200 but got 400
      at chai.request.post.send.end (test/routeDataTests.js:24:21)
      at Test.Request.callback (node_modules/superagent/lib/node/index.js:797:3)
      at IncomingMessage.<anonymous> (node_modules/superagent/lib/node/index.js:990:12)
      at endReadableNT (_stream_readable.js:975:12)
      at _combinedTickCallback (internal/process/next_tick.js:80:11)
      at process._tickCallback (internal/process/next_tick.js:104:9)



